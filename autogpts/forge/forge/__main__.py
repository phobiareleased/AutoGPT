import os

import uvicorn
from dotenv import load_dotenv

import forge.sdk.forge_log

LOG = forge.sdk.forge_log.ForgeLogger(__name__)


logo = """\n\n
 ________  ___       ________  _______   ________  _________  ________  ________  _________   
|\   __  \|\  \     |\   __  \|\  ___ \ |\   __  \|\___   ___\\   ____\|\   __  \|\___   ___\ 
\ \  \|\  \ \  \    \ \  \|\ /\ \   __/|\ \  \|\  \|___ \  \_\ \  \___|\ \  \|\  \|___ \  \_| 
 \ \   __  \ \  \    \ \   __  \ \  \_|/_\ \   _  _\   \ \  \ \ \  \  __\ \   ____\   \ \  \  
  \ \  \ \  \ \  \____\ \  \|\  \ \  \_|\ \ \  \\  \|   \ \  \ \ \  \|\  \ \  \___|    \ \  \ 
   \ \__\ \__\ \_______\ \_______\ \_______\ \__\\ _\    \ \__\ \ \_______\ \__\        \ \__\
    \|__|\|__|\|_______|\|_______|\|_______|\|__|\|__|    \|__|  \|_______|\|__|         \|__|
                                                                                              
                                                                                              
                                                                                              
 ________ ________  ________  ________  _______                                               
|\  _____\\   __  \|\   __  \|\   ____\|\  ___ \                                              
\ \  \__/\ \  \|\  \ \  \|\  \ \  \___|\ \   __/|                                             
 \ \   __\\ \  \\\  \ \   _  _\ \  \  __\ \  \_|/__                                           
  \ \  \_| \ \  \\\  \ \  \\  \\ \  \|\  \ \  \_|\ \                                          
   \ \__\   \ \_______\ \__\\ _\\ \_______\ \_______\                                         
    \|__|    \|_______|\|__|\|__|\|_______|\|_______|                                         
\n"""

if __name__ == "__main__":
    print(logo)
    port = os.getenv("PORT", 8000)
    LOG.info(f"Agent server starting on http://localhost:{port}")
    load_dotenv()
    forge.sdk.forge_log.setup_logger()

    uvicorn.run(
        "forge.app:app", host="localhost", port=port, log_level="error", reload=True
    )
